# 破坏性变更

## v1.7.0

**存储系统重构 - 参数名变更 (⚠️ 需要更新配置)**

| 存储类型 | v1.6.2 | v1.7.0 | 状态 |
|--------|--------|--------|------|
| AWS S3 | `keyId`/`key` | `accessKey`/`secretKey` | ❌ 参数名变更 |
| MinIO | `keyId`/`key`/`serviceUrl` | `accessKey`/`secretKey`/`endpoint` | ❌ 参数名变更 |
| Azure Blob | `account`/`key` | ❌ **不再支持** | ❌ **已移除** |

**AWS S3 示例:**
```
# v1.6.2
aws.s3://keyId=AKIA...;key=secret...;bucket=my-bucket;region=us-east-1

# v1.7.0
aws.s3://accessKey=AKIA...;secretKey=secret...;bucket=my-bucket;region=us-east-1
```

**MinIO 示例:**
```
# v1.6.2
minio.s3://keyId=admin;key=admin;bucket=gzctf;serviceUrl=http://minio:9000

# v1.7.0
minio.s3://accessKey=admin;secretKey=admin;bucket=gzctf;endpoint=http://minio:9000;forcePathStyle=true
```

⚠️ **Azure Blob Storage 已移除** - 迁移到 MinIO (自托管) 或 AWS S3

**S3 参数:** `accessKey`, `secretKey` (必需*), `bucket`, `region`, `endpoint` (可选), `useHttp`, `forcePathStyle`, `sessionToken`

⚠️ **数据库自动升级，不支持降级**

## v1.2.2

**Breaking Changes**

- 移除 `Google ReCaptcha` 验证码配置项

  更新步骤：删除 `Google ReCaptcha` 验证码配置项，选用其他验证方式，如 `Cloudflare Turnstile` 验证码。

## v0.24

**Breaking Changes**

- **配置项 `SendMailAddress` 已更名为 `SenderAddress`**

  更新步骤：将 `SendMailAddress` 配置项更改为 `SenderAddress`

## v0.18

- **新增**：初步支持了 i18n 多语言支持，目前支持中文、日文、英文

**Break Changes**

- **数据库结构不再与之前兼容，需要重新初始化数据库，如需保持数据请使用 `v0.17` 版本**

  更新步骤：删除原有数据库，重新初始化数据库

- **容器默认暴露端口从 `80` 变为 `8080`**

  更新步骤：修改容器暴露端口为 `8080`

  参考资料：[Default ASP.NET Core port changed from 80 to 8080](https://learn.microsoft.com/en-us/dotnet/core/compatibility/containers/8.0/aspnet-port)

## v0.17

**Break Changes**

- **将原有 `uploads` 目录移动至 `files/uploads`，移除了此目录的配置项，更改了日志存储位置**

  更新步骤：将原有 `uploads` 目录移动至 `files/uploads`，并重新挂载相关目录，删除 `uploads` 目录的配置项和原有 `log` 目录

## v0.16-v0.1

见 Release 记录：https://github.com/GZTimeWalker/GZCTF/releases
