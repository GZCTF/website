# リリースノート

## v1.7.0

**ストレージシステムの再設計 (⚠️ 設定更新が必要)**

### ストレージ設定の変更

| タイプ | 旧形式 | 新形式 | ステータス |
|------|-------|-------|---------|
| ローカルディスク | `disk://path=...` | `disk://path=...` | ✅ 変化なし |
| AWS S3 | `keyId=...;key=...` | `accessKey=...;secretKey=...` | ❌ パラメータ名変更 |
| MinIO S3 | `keyId=...;key=...` | `accessKey=...;secretKey=...` | ❌ パラメータ名変更 |
| Azure Blob | `azure.blobs://...` | ❌ サポートなし | ❌ 削除済み |

### ⚠️ 必須の更新

**AWS S3 / MinIO ユーザー:**

`ConnectionStrings:Storage` を更新:

```
旧: aws.s3://keyId=AKIA...;key=secret...;bucket=my-bucket;region=us-east-1
新: aws.s3://accessKey=AKIA...;secretKey=secret...;bucket=my-bucket;region=us-east-1

旧: minio.s3://keyId=admin;key=admin;bucket=gzctf;serviceUrl=http://minio:9000
新: minio.s3://accessKey=admin;secretKey=admin;bucket=gzctf;endpoint=http://minio:9000;forcePathStyle=true
```

**Azure Blob ユーザー:**

Azure Blob Storage はサポートされなくなりました。AWS S3 または MinIO に移行してください:
1. 別のストレージを選択
2. ファイルデータを移行
3. GZCTF 設定を更新
4. GZCTF を再起動

### S3 パラメータ

- `accessKey` (必須*): AWS アクセスキー ID
- `secretKey` (必須*): AWS シークレットキー
- `bucket` (必須): バケット名
- `region` (必須**): AWS リージョン
- `endpoint` (オプション): MinIO 用カスタム URL
- `useHttp` (オプション): HTTP を使用 (デフォルト: false)
- `forcePathStyle` (オプション): パススタイル URL (デフォルト: false)
- `sessionToken` (オプション): 一時認証情報

\* 省略時は AWS デフォルト認証チェーンが使用されます
\*\* `region` または `endpoint` のいずれかが必須

⚠️ **データベースは自動でアップグレードされます。** ダウングレードはサポートされていません。

## v1.2.2

**Breaking Changes**

- `Google ReCaptcha` の検証コード設定項目が削除されました

  更新手順: `Google ReCaptcha` の検証コード設定項目を削除し、他の検証方法（例: `Cloudflare Turnstile` 検証コード）を選択します。

## v0.24

**Breaking Changes**

- **`SendMailAddress` が `SenderAddress` に名前が変更されました**

  更新手順: `SendMailAddress` 設定キーを `SenderAddress` に変更します

## v0.18

- **新機能**：多言語対応。今は英語、日本語と中国語を対応しています。

**Break Changes**

- **データベースは以前のバージョンとの互換性がありません。データベースを新規セットアープ必要があります。元のデータベースを引き続き利用する場合は `v0.17` を使用してください。**

  更新手順：元のデータベースを削除し、再初期化します。

- **コンテナの既定ポートは `80` から `8080` に変更**

  更新手順：コンテナの既定ポートを `8080` に変更します。

  参考資料：[既定の ASP.NET Core ポートが 80 から 8080 に変更されました](https://learn.microsoft.com/dotnet/core/compatibility/containers/8.0/aspnet-port)

## v0.17

**Break Changes**

- **元の `uploads` ディレクトリを `files/uploads` に移動し、このディレクトリの設定項目を削除し、ログの保存場所を変更しました。**

  アップデート手順: 元の `uploads` ディレクトリを `files/uploads` に移動し、関連するディレクトリを再マウントし、`uploads` ディレクトリの設定項目と元の `log` ディレクトリを削除します。

## v0.16-v0.1

リリースノートを参照してください: https://github.com/GZTimeWalker/GZCTF/releases
